<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Aprobación de PAACs - Departamento de Ciencias Exactas</title>
  <link rel="stylesheet" href="dashboardAdmin.css">
</head>
<body>
  <main class="container">
    <h1>Aprobación de PAACs</h1>
    <p class="intro">Seleccione los PAACs a aprobar y complete los datos de resolución.</p>

    <div class="department-header">
      <h2>Departamento de Ciencias Exactas</h2>
      <div class="actions">
        <button id="select-all" class="action-btn">Seleccionar todos</button>
        <button id="deselect-all" class="action-btn">Deseleccionar todos</button>
      </div>
    </div>

    <ul class="career-list">
      <li>
        <button class="toggle career-toggle">Licenciatura en Sistemas de Información</button>
        <ul class="nested">
          <li>
            <div class="subject-item">
              <input type="checkbox" id="paac-1" class="paac-checkbox">
              <label for="paac-1" class="subject-toggle">Algoritmos y Estructuras de Datos</label>
              <ul class="subject-options">
                <li><span class="paac-version current-paac">PAAC 2024</span></li>
                <li><span class="paac-status pending">Pendiente de aprobación</span></li>
              </ul>
            </div>
          </li>
          <li>
            <div class="subject-item">
              <input type="checkbox" id="paac-2" class="paac-checkbox" checked>
              <label for="paac-2" class="subject-toggle">Base de Datos</label>
              <ul class="subject-options">
                <li><span class="paac-version current-paac">PAAC 2024</span></li>
                <li><span class="paac-status in-review">En revisión</span></li>
              </ul>
            </div>
          </li>
          <li>
            <div class="subject-item">
              <input type="checkbox" id="paac-3" class="paac-checkbox">
              <label for="paac-3" class="subject-toggle">Ingeniería de Software</label>
              <ul class="subject-options">
                <li><span class="paac-version current-paac">PAAC 2024</span></li>
                <li><span class="paac-status approved">Aprobado (Res. 456/2023)</span></li>
              </ul>
            </div>
          </li>
        </ul>
      </li>
      <li>
        <button class="toggle career-toggle">Profesorado en Matemática</button>
        <ul class="nested">
          <li>
            <div class="subject-item">
              <input type="checkbox" id="paac-4" class="paac-checkbox">
              <label for="paac-4" class="subject-toggle">Análisis Matemático I</label>
              <ul class="subject-options">
                <li><span class="paac-version current-paac">PAAC 2024</span></li>
                <li><span class="paac-status pending">Pendiente de aprobación</span></li>
              </ul>
            </div>
          </li>
          <li>
            <div class="subject-item">
              <input type="checkbox" id="paac-5" class="paac-checkbox" checked>
              <label for="paac-5" class="subject-toggle">Álgebra</label>
              <ul class="subject-options">
                <li><span class="paac-version current-paac">PAAC 2024</span></li>
                <li><span class="paac-status pending">Pendiente de aprobación</span></li>
              </ul>
            </div>
          </li>
        </ul>
      </li>
    </ul>

    <div class="approval-form">
      <h3>Datos de Aprobación</h3>
      <div class="form-group">
        <label for="resolution-number">Número de Resolución:</label>
        <input type="text" id="resolution-number" placeholder="Ej: 789/2024">
      </div>
      <div class="form-group">
        <label for="approval-date">Fecha de Aprobación:</label>
        <input type="date" id="approval-date">
      </div>
      <div class="form-group">
        <label for="comments">Observaciones:</label>
        <textarea id="comments" rows="3"></textarea>
      </div>
      <button id="approve-selected" class="approve-btn">Aprobar PAACs seleccionados</button>
    </div>
  </main>

  <script>
    // Manejo de selección/deselección
    document.getElementById('select-all').addEventListener('click', () => {
      document.querySelectorAll('.paac-checkbox').forEach(checkbox => {
        checkbox.checked = true;
      });
    });

    document.getElementById('deselect-all').addEventListener('click', () => {
      document.querySelectorAll('.paac-checkbox').forEach(checkbox => {
        checkbox.checked = false;
      });
    });

    // Manejo de aprobación
    document.getElementById('approve-selected').addEventListener('click', () => {
      const resolutionNumber = document.getElementById('resolution-number').value;
      const approvalDate = document.getElementById('approval-date').value;
      
      if (!resolutionNumber) {
        alert('Por favor ingrese el número de resolución');
        return;
      }

      const selectedPAACs = Array.from(document.querySelectorAll('.paac-checkbox:checked'))
        .map(checkbox => checkbox.nextElementSibling.textContent);
      
      if (selectedPAACs.length === 0) {
        alert('Por favor seleccione al menos un PAAC para aprobar');
        return;
      }

      // Simular aprobación (en un sistema real sería una llamada AJAX)
      alert(`PAACs aprobados con Resolución ${resolutionNumber}:\n\n- ${selectedPAACs.join('\n- ')}`);
      
      // Actualizar estado visualmente
      document.querySelectorAll('.paac-checkbox:checked').forEach(checkbox => {
        const statusElement = checkbox.closest('.subject-item').querySelector('.paac-status');
        statusElement.textContent = `Aprobado (Res. ${resolutionNumber})`;
        statusElement.className = 'paac-status approved';
      });
    });

    // Toggle para carreras
    document.querySelectorAll('.toggle').forEach(button => {
      button.addEventListener('click', (e) => {
        e.stopPropagation();
        const nested = button.nextElementSibling;
        nested.classList.toggle('hidden');
        button.classList.toggle('active');
      });
    });
  </script>
</body>
</html>